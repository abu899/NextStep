# 2장. 문자열 계산기 구현을 통한 테스트와 리팩토링

## 리팩토링

소스코드를 구현했다면 반드시 뒤따라야 하는 과정은 중복을 제거하고 읽기 좋은 코드를 구현하기 위해
구조를 변경하는 리팩토링이다. 간단하게 다음 요구사항을 만족하도록 리팩토링 해보자

- 메소드가 한 가지 책임만을 가지도록 구현
- 인덴트 깊이를 1단계로 유지
- else를 사용하지 마라

소스코드를 깔끔하게 구현하는 시작이 막연한 경우 위 세가지 부터 실천해보자.

### 리팩토링 실천

작은 코드를 연습할 때 극단적으로 리팩토링을 진행해보아야 실무에서 리팩토링할 부분을 더 쉽게 찾아 개선할 수 있다.

리팩토링을 한 후 주의 깊게 봐야할 부분은 private로 분리한 메서드가 아니라 `public으로 공개한 메서드가
얼마나 읽기 쉽고 좋은가`이다. private은 세부 구현으로 관심사에서 분리하고 public 메서드가 무슨 일을 하는지 쉽게 파악할 수 있어야한다.


### 리마인드

- 각 단계의 개발 과정은 구현 -> 테스트를 통한 결과 확인 -> 리팩토링
  - 리팩토링은 읽기 좋은 코드를 구현하기 위해 개발자가 갖추어야 할 중요한 역량
- 리팩토링을 할 부분을 찾기 막막하다면 앞서 언급한 세 가지 원칙을 먼저 생각하자
- 리팩토링을 극단적으로 진행할 수 있는 건 테스트 코드 덕분이다
  - 테스트를 수동으로 한다면 리팩토링에 대한 부담이 생기기 때문에 테스트와 리팩토링은 분리할 수 없는 관계이다

## 추가 자료

### TDD와 리팩토링

- TDD를 바로 연습하는 것도 좋지만 JUnit을 활용해 테스트를 검증하다가 한 단계 성장하고자 할 때 시도하는 것을 추천
- 안정적인 리팩토링을 위해선 견고한 테스트가 뒷받침 되어야 한다
- TDD와 리팩토링 연습을 위해서는 단순한 로직 또는 외부 의존이 없는 로직부터 시작하는 것이 좋다
- 추천 서적
  - 테스트 주도 개발(켄트 백)
  - 리팩토링: 코드 품질을 개선하는 객체지향 사고법(마틴 파울러)
    - 4장까지 읽고 5장부터는 바이블처럼 필요한 내용을 찾아서 읽기
  - 정규 표현식
    - 손에 잡히는 정규 표현식(벤 포터)